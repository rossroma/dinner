webpackJsonp([1],{144:function(e,t){},145:function(e,t){},146:function(e,t){},147:function(e,t,n){function s(e){n(146)}var a=n(40)(n(92),n(151),s,"data-v-46b42f02",null);e.exports=a.exports},148:function(e,t,n){function s(e){n(145)}var a=n(40)(n(93),n(150),s,null,null);e.exports=a.exports},149:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"indexTitle"},[e._v("逍邦网络点餐系统")]),e._v(" "),n("router-view")],1)},staticRenderFns:[]}},150:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main",attrs:{id:"order"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.btnShow,expression:"btnShow"}],staticClass:"orderItem"},[n("span",{domProps:{innerHTML:e._s(e.itemMsg)}}),e._v(" "),n("button",{on:{click:e.backout}},[e._v("撤销")])]),e._v(" "),n("div",{staticClass:"btnOut"},[n("div",{staticClass:"slideOut"},[n("transition",{attrs:{name:"slide-fade"}},[n("div",{staticClass:"orderForm"},[n("p",[e._v("姓名")]),e._v(" "),n("p",[e._v("主食")]),e._v(" "),n("p",[e._v("份数")]),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{prop:"userName"}},[n("el-input",{attrs:{size:"small",placeholder:"输入姓名"},model:{value:e.form.userName,callback:function(t){e.form.userName=t},expression:"form.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"foodType"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.foodType,callback:function(t){e.form.foodType=t},expression:"form.foodType"}},e._l(e.typeOption,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1),e._v(" "),n("el-form-item",{attrs:{prop:"count"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.count,callback:function(t){e.form.count=t},expression:"form.count"}},e._l(e.countOption,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e}})}))],1),e._v(" "),n("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.form.others,callback:function(t){e.form.others=t},expression:"form.others"}})],1)],1)]),e._v(" "),n("button",{staticClass:"orderBtn",style:e.styleClass,on:{click:e.onSubmit}},[e._v("\n          "+e._s(e.submitText)+"\n        ")])],1)])])},staticRenderFns:[]}},151:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"listView"},[n("div",{staticClass:"listBtn"},[n("el-switch",{attrs:{"on-text":"","off-text":""},on:{change:e.toggleDinner},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),e._v(" "),n("span",[e._v(e._s(e.status?"点餐开启":"点餐关闭"))])],1),e._v(" "),n("el-table",{attrs:{data:e.tableData,stripe:"",width:"100%"}},[n("el-table-column",{attrs:{type:"index",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"姓名",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"主食",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"count",label:"数量",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间",width:"180",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"others",label:"备注",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){n.preventDefault(),e.deleteRow(t.$index,t.row.objectId)}}},[e._v("\n            撤销\n          ")])]}}])})],1),e._v(" "),n("div",{staticClass:"tableSum"},[n("P",[e._v("米饭："),n("span",[e._v(e._s(e.rice))])]),e._v(" "),n("P",[e._v("馒头："),n("span",[e._v(e._s(e.buns))])])],1)],1)},staticRenderFns:[]}},155:function(e,t){},42:function(e,t,n){"use strict";var s=n(2),a=n(62);s.default.use(a.a);var o=function(e,t){s.default.http.get("/"+e).then(function(e){200===e.status?t(e.body):console.log(e.status)})},r=function(e,t,n){s.default.http.post("/"+e,t).then(function(e){200===e.status?n(e.body):console.log(e.status)})},i=function(){return{set:function(e,t){window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},remove:function(e){window.localStorage.removeItem(e)}}},l=new s.default;l.get=o,l.post=r,l.storage=i,t.a=l},63:function(e,t,n){"use strict";var s=n(2),a=n(152),o=n(148),r=n.n(o),i=n(147),l=n.n(i);s.default.use(a.a),t.a=new a.a({routes:[{path:"/",component:r.a},{path:"*",component:r.a},{path:"/YouNeverKnowThePath",component:l.a}]})},65:function(e,t){},66:function(e,t,n){function s(e){n(144)}var a=n(40)(n(91),n(149),s,null,null);e.exports=a.exports},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=n(64),o=n.n(a),r=n(65),i=(n.n(r),n(66)),l=n.n(i),u=n(63);s.default.config.productionTip=!1,s.default.use(o.a),new s.default({el:"#app",template:"<App/>",components:{App:l.a},router:u.a,render:function(e){return e(l.a)}})},90:function(e,t,n){"use strict";function s(e){return"object"===(void 0===e?"undefined":o()(e))&&(e=e.getTime()),new Date(e+288e5)}var a=n(43),o=n.n(a),r=n(2),i=n(62);r.default.use(i.a);var l=function(e,t){if(e)if("object"===(void 0===e?"undefined":o()(e)))e=s(e);else{if("number"!=typeof e){if("string"==typeof e){if(10===e.length||16===e.length)return e;if(24===e.length)return e=new Date(e),e=s(e),e.toISOString().slice(0,10)}throw new Error("Unknow this Date type, in utils.js, function formatDate")}10===e.toString().length&&(e*=1e3),e=s(e)}else e=s(new Date);return"datetime"===t?e.toISOString().substring(0,16).replace("T"," "):e.toISOString().slice(0,10)},u=new r.default;u.formatDate=l,t.a=u},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(42);t.default={name:"listView",data:function(){return{status:!0,tableData:[],rice:0,buns:0}},created:function(){function e(){var e=this;s.a.get("getAllDinner",function(t){if(1===t.code){e.status=t.result.dinnerStatus;var n=t.result.results;for(var s in n)1===n[s].count?n[s].count="0.5":2===n[s].count?n[s].count="1":3===n[s].count?n[s].count="2":n[s].count="3",1===n[s].type?(n[s].type="米饭",e.rice=parseFloat(n[s].count)+e.rice):(n[s].type="馒头",e.buns=parseFloat(n[s].count)+e.buns);e.tableData=n}else e.$message({type:"error",message:t.msg})})}e.bind(this)()},methods:{toggleDinner:function(){var e=this;s.a.get("toggleDinner",function(t){e.$message({type:"success",message:t.msg})})},deleteRow:function(e,t){var n=this,a="cancelDinner/"+t;s.a.get(a,function(t){1===t.code?(n.$message({type:"success",message:t.msg}),n.tableData.splice(e,1)):n.$message({type:"error",message:t.msg})})}}}},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(94),a=n.n(s),o=n(43),r=n.n(o),i=n(42),l=n(90);t.default={name:"order",data:function(){return{submitText:"我要点餐",styleClass:"",btnShow:!1,arrowClass:"el-icon-d-arrow-right",typeOption:[{value:1,label:"米饭"},{value:2,label:"馒头"}],countOption:[{value:1,label:"0.5"},{value:2,label:"1"},{value:3,label:"2"},{value:4,label:"3"}],form:{userName:"",foodType:"",count:"",others:""},rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],foodType:[{required:!0,message:"请选择主食",trigger:"change",type:"object"}],count:[{required:!0,message:"请选择数量",trigger:"change",type:"object"}]},itemMsg:"",addDataStr:"",objectId:""}},created:function(){function e(){var e=this,t=JSON.parse(localStorage.addDataStr);this.form.userName=t.userName,1===t.type?this.form.foodType=this.typeOption[0]:this.form.foodType=this.typeOption[1],1===t.count?this.form.count=this.countOption[0]:2===t.count?this.form.count=this.countOption[1]:3===t.count?this.form.count=this.countOption[2]:this.form.count=this.countOption[3];var n="getDinner/"+t.userName;i.a.get(n,function(t){if(1===t.code){var n=t.result[0];if(n){var s=void 0,a=void 0;s=1===n.count?"0.5":2===n.count?"1":3===n.count?"2":"3",a=1===n.type?"米饭":"馒头",e.itemMsg="<em>"+n.createdAt+"</em><em>"+n.userName+"</em><em>"+a+"</em>("+s+")",e.btnShow=!0,e.styleClass="background:#efa867",e.submitText="已点餐",e.objectId=n.objectId}}else e.$message({type:"error",message:t.msg})})}localStorage.addDataStr&&e.bind(this)()},methods:{onSubmit:function(){var e=this,t=new Date,n=l.a.formatDate(t,"datetime");!1!==this.btnShow&&this.$message({type:"error",message:"您已点餐，如需重点，请先撤销！"}),this.$refs.form.validate(function(t){if(!t)return console.warn("error submit!!"),!1;e.itemMsg="<em>"+n+"</em><em>"+e.form.userName+"</em><em>"+e.form.foodType.label+"</em>("+e.form.count.label+")"});var s="getDinner/"+this.form.userName;i.a.get(s,function(t){var n=t.result;1===t.code?0!==n.length||void 0===(void 0===n?"undefined":r()(n))?e.$message({type:"error",message:"已有人帮您点餐，请勿重复点！"}):e.addFuntion():e.$message({type:"error",message:t.msg})})},addFuntion:function(){var e=this,t=new Date,n=l.a.formatDate(t,"datetime");if(!1===this.btnShow){var s={userName:this.form.userName,type:this.form.foodType.value,count:this.form.count.value,others:this.form.others};this.addDataStr=a()(s),i.a.storage().set("addDataStr",this.addDataStr);var o={type:this.form.foodType.label,count:this.form.count.label,myTime:n},r=a()(o);i.a.storage().set("viewDataStr",r),i.a.post("addDinner",s,function(t){1===t.code?(e.$message({type:"success",message:t.msg}),e.styleClass="background:#efa867",e.submitText="已点餐",e.btnShow=!0,e.objectId=t.result.objectId):e.$message({type:"error",message:t.msg})})}},resetForm:function(){this.$refs.form.resetFields()},backout:function(){var e=this;this.resetForm();var t="cancelDinner/"+this.objectId;i.a.get(t,function(t){1===t.code?(e.$message({type:"success",message:t.msg}),e.itemMsg="",e.styleClass="",e.submitText="我要点餐",e.btnShow=!1):e.$message({type:"error",message:t.msg})})}}}}},[89]);
//# sourceMappingURL=app.0c15207760ab21e7cefd.js.map