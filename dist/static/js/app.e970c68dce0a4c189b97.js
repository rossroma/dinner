webpackJsonp([1],{121:function(e,t,n){"use strict";var a=n(1),r=n(66);a.default.use(r.a);var s=function(e,t){a.default.http.get("/"+e).then(function(e){200===e.status?t(e.body):console.log(e.status)})},o=function(e,t,n){a.default.http.post("/"+e,t).then(function(e){200===e.status?n(e.body):console.log(e.status)})},i=function(){return{set:function(e,t){window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},remove:function(e){window.localStorage.removeItem(e)}}},l=new a.default;l.get=s,l.post=o,l.storage=i,t.a=l},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),r=(n.n(a),n(70)),s=n.n(r),o=n(91),i=(n.n(o),n(75)),l=n.n(i),u=n(92),c=(n.n(u),n(76)),f=n.n(c),d=n(89),m=(n.n(d),n(17)),p=n.n(m),g=n(86),v=(n.n(g),n(71)),b=n.n(v),h=n(87),y=(n.n(h),n(72)),w=n.n(y),_=n(95),S=(n.n(_),n(79)),O=n.n(S),k=n(96),N=(n.n(k),n(80)),D=n.n(N),x=n(94),L=(n.n(x),n(78)),C=n.n(L),T=n(97),F=(n.n(T),n(81)),$=n.n(F),I=n(84),j=(n.n(I),n(69)),z=n.n(j),E=n(93),R=(n.n(E),n(77)),V=n.n(R),A=n(90),J=(n.n(A),n(74)),M=n.n(J),q=n(82),B=(n.n(q),n(49)),P=n.n(B),U=n(88),G=(n.n(U),n(73)),H=n.n(G),K=n(83),Q=(n.n(K),n(50)),W=(n.n(Q),n(68)),X=n.n(W),Y=n(1),Z=n(98);Y.default.config.productionTip=!1,Y.default.use(X.a),Y.default.use(H.a),Y.default.use(P.a),Y.default.use(M.a),Y.default.use(V.a),Y.default.use(z.a),Y.default.use($.a),Y.default.use(C.a),Y.default.use(D.a),Y.default.use(O.a),Y.default.use(w.a),Y.default.use(b.a),Y.default.use(p.a),Y.default.use(f.a),Y.default.use(l.a),Y.default.use(s.a),new Y.default({el:"#app",render:function(e){return e(Z.a)}})},123:function(e,t,n){"use strict";function a(e){return"object"===(void 0===e?"undefined":s()(e))&&(e=e.getTime()),new Date(e+288e5)}var r=n(8),s=n.n(r),o=n(1),i=n(66);o.default.use(i.a);var l=function(e,t){if(e)if("object"===(void 0===e?"undefined":s()(e)))e=a(e);else{if("number"!=typeof e){if("string"==typeof e){if(10===e.length||16===e.length)return e;if(24===e.length)return e=new Date(e),e=a(e),e.toISOString().slice(0,10)}throw new Error("Unknow this Date type, in utils.js, function formatDate")}10===e.toString().length&&(e*=1e3),e=a(e)}else e=a(new Date);return"datetime"===t?e.toISOString().substring(0,16).replace("T"," "):e.toISOString().slice(0,10)},u=new o.default;u.formatDate=l,t.a=u},124:function(e,t,n){"use strict";var a=n(170),r=(n.n(a),n(161)),s=n.n(r),o=n(171),i=(n.n(o),n(50)),l=(n.n(i),n(162)),u=n.n(l),c=n(8),f=n.n(c),d=n(121),m=n(123);t.a={name:"app",data:function(){return{activeName:"orderList",tableData:[],dialogFormVisible:!1,dinnerStatus:!1,myDinnerStatus:!1,myName:"",loginStatus:!1,formOrder:{userName:"",type:1,count:1,others:""},rulesOrder:{userName:{required:!0,message:"请输入点餐人姓名！",trigger:"blur"}},formLogin:{password:""},rulesLogin:{password:{required:!0,message:"请输入管理密码！",trigger:"blur"}},pickDate:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"前天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-1728e5),e.$emit("pick",t)}}]}}},computed:{dinnerStatusText:function(){return this.dinnerStatus?"开启":"关闭"}},created:function(){this.getOrderList(),this.getLocalStorage()},methods:{getOrderList:function(e){var t=this;"object"===(void 0===e?"undefined":f()(e))&&(e=m.a.formatDate(e));var n=void 0;n=e?"getAllDinner?date="+e:"getAllDinner",d.a.get(n,function(e){t.dinnerStatus=e.result.dinnerStatus,t.tableData=e.result.results,t.loginStatus=e.result.loginStatus})},getLocalStorage:function(){var e=window.JSON.parse(d.a.storage().get("DINNER-userinfos"));e&&(this.formOrder.userName=this.myName=e.userName,this.formOrder.type=Number(e.type)||1,this.formOrder.count=Number(e.count)||1)},setLocalStorage:function(e){var t={userName:e.userName,type:e.type,count:e.count};t=window.JSON.stringify(t),d.a.storage().set("DINNER-userinfos",t)},handleSubmit:function(){var e=this;this.$refs.formOrder.validate(function(t){if(!t)return u()({type:"error",message:"输入有误，请检查后重新提交！"}),!1;-1===e.tableData.map(function(e){return e.userName}).indexOf(e.myName)?e.orderSubmit():u()({type:"error",message:"你已点餐，请勿重复提交！"})})},orderSubmit:function(){var e=this,t=this.formOrder;d.a.post("addDinner",t,function(n){1===n.code?(u()({type:"success",message:n.msg}),e.myDinnerStatus=!0,e.getOrderList(),e.setLocalStorage(t),e.myName=t.userName):u()({type:"error",message:n.msg})})},handleSwitch:function(){d.a.get("toggleDinner",function(e){u()({type:"success",message:e.msg})})},handleTabClick:function(e){this.getOrderList()},login:function(){var e=this;this.$refs.formLogin.validate(function(t){if(!t)return u()({type:"error",message:"请输入管理密码！"}),!1;var n=e.formLogin;d.a.post("signin",n,function(t){1===t.code?(u()({type:"success",message:"登陆成功！"}),e.loginStatus=!0,e.dialogFormVisible=!1):u()({type:"error",message:"密码错误！"})})})},handleDelete:function(e){var t=this;s()("是否撤销此次点餐?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteRow(e)}).catch(function(){})},deleteRow:function(e){var t=this,n="cancelDinner/"+e;d.a.get(n,function(e){1===e.code?(u()({type:"success",message:e.msg}),t.myDinnerStatus=!1,t.getOrderList()):u()({type:"error",message:e.msg})})},chooseMine:function(e){return e.userName===this.myName?"positive-row":""},getSummaries:function(){var e=0,t=0;return this.tableData.forEach(function(n){1===n.type?e+=n.count:t+=n.count}),["统计","米饭："+e,"馒头："+t]}},filters:{typeFilter:function(e){return 1===e?"米饭":"馒头"},timeFilter:function(e){return e.slice(-8)}}}},170:function(e,t){},171:function(e,t){},172:function(e,t){},173:function(e,t){},178:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("h1",{staticClass:"title"},[e._v("逍邦网络点餐系统")]),e._v(" "),e.loginStatus?n("p",{staticClass:"login login-text"},[e._v("欢迎登录!")]):n("el-button",{staticClass:"login",attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("登录")])],1),e._v(" "),n("el-main",[e.loginStatus?["orderList"===e.activeName?n("div",{staticClass:"dinner-status"},[n("el-switch",{staticClass:"switch",on:{change:e.handleSwitch},model:{value:e.dinnerStatus,callback:function(t){e.dinnerStatus=t},expression:"dinnerStatus"}}),e._v(" "),n("span",{staticClass:"text"},[e._v("点餐"+e._s(e.dinnerStatusText))])],1):n("el-date-picker",{staticClass:"date-picker",attrs:{size:"small",align:"right",type:"date",placeholder:"历史数据筛选","picker-options":e.pickerOptions},on:{change:e.getOrderList},model:{value:e.pickDate,callback:function(t){e.pickDate=t},expression:"pickDate"}})]:e._e(),e._v(" "),n("el-tabs",{staticClass:"tabs",on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"已点餐列表",name:"orderList"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.chooseMine,"show-summary":"","summary-method":e.getSummaries}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{label:"主食"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("typeFilter")(t.row.type))+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"count",label:"数量"}}),e._v(" "),n("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("timeFilter")(t.row.createdAt))+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"备注"}}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userName===e.myName||e.loginStatus?n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){n.preventDefault(),e.handleDelete(t.row.objectId)}}},[e._v("\n                撤销\n              ")]):e._e()]}}])})],1)],1),e._v(" "),e.loginStatus?n("el-tab-pane",{attrs:{label:"历史记录",name:"historyLog"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"show-summary":"","summary-method":e.getSummaries}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{label:"主食",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("typeFilter")(t.row.type))+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"count",label:"数量",width:"180"}}),e._v(" "),n("el-table-column",{attrs:{prop:"createdAt",label:"时间",width:"220"}}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"备注"}})],1)],1):e._e()],1),e._v(" "),"orderList"===e.activeName?n("el-form",{ref:"formOrder",staticClass:"form-order",attrs:{inline:!0,model:e.formOrder,rules:e.rulesOrder}},[n("div",{staticClass:"row"},[n("el-form-item",{attrs:{prop:"userName"}},[n("el-input",{attrs:{size:"small",placeholder:"点餐人"},model:{value:e.formOrder.userName,callback:function(t){e.$set(e.formOrder,"userName",t)},expression:"formOrder.userName"}})],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{size:"small",placeholder:"主食"},model:{value:e.formOrder.type,callback:function(t){e.$set(e.formOrder,"type",t)},expression:"formOrder.type"}},[n("el-option",{attrs:{value:1,label:"米饭"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"馒头"}})],1)],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{size:"small",placeholder:"主食数量"},model:{value:e.formOrder.count,callback:function(t){e.$set(e.formOrder,"count",t)},expression:"formOrder.count"}},[n("el-option",{attrs:{value:.5}}),e._v(" "),n("el-option",{attrs:{value:1}}),e._v(" "),n("el-option",{attrs:{value:2}})],1)],1)],1),e._v(" "),n("div",{staticClass:"row pc"},[n("el-form-item",[n("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:4,resize:"none",placeholder:"备注信息"},model:{value:e.formOrder.others,callback:function(t){e.$set(e.formOrder,"others",t)},expression:"formOrder.others"}})],1),e._v(" "),n("el-form-item",[n("a",{staticClass:"login-btn normal",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("我要点餐")])])],1),e._v(" "),n("div",{staticClass:"mobile"},[n("a",{staticClass:"login-btn-m",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("我要点餐")])])]):e._e()],2),e._v(" "),n("el-dialog",{attrs:{title:"管理员登录",width:"400",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"formLogin",attrs:{model:e.formLogin,rules:e.rulesLogin}},[n("el-form-item",{attrs:{label:"管理密码",prop:"password"}},[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入管理密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登 录")])],1)],1)],1)},r=[],s={render:a,staticRenderFns:r};t.a=s},180:function(e,t){},50:function(e,t){},82:function(e,t){},83:function(e,t){},84:function(e,t){},85:function(e,t){},86:function(e,t){},87:function(e,t){},88:function(e,t){},89:function(e,t){},90:function(e,t){},91:function(e,t){},92:function(e,t){},93:function(e,t){},94:function(e,t){},95:function(e,t){},96:function(e,t){},97:function(e,t){},98:function(e,t,n){"use strict";function a(e){n(173),n(172)}var r=n(124),s=n(178),o=n(177),i=a,l=o(r.a,s.a,!1,i,"data-v-21c8e972",null);t.a=l.exports}},[122]);
//# sourceMappingURL=app.e970c68dce0a4c189b97.js.map